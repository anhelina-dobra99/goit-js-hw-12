{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt', \n        captionDelay: 250 \n    });\n\nexport async function renderImages(images) {\n  try {\n    const gallery = document.querySelector(\".gallery\");\n\n    const galleryMarkup = images.map(image => `\n      <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\"/>\n  <div class=\"image-info\">\n      <div class=\"info-item\">\n        <p class=\"info-title\">Likes</p>\n        <p class=\"info-value\">${image.likes}</p>\n      </div>\n      <div class=\"info-item\">\n        <p class=\"info-title\">Views</p>\n        <p class=\"info-value\">${image.views}</p>\n      </div>\n      <div class=\"info-item\">\n        <p class=\"info-title\">Comments</p>\n        <p class=\"info-value\">${image.comments}</p>\n      </div>\n      <div class=\"info-item\">\n        <p class=\"info-title\">Downloads</p>\n        <p class=\"info-value\">${image.downloads}</p>\n      </div>\n    </div>\n      </a>\n    `).join(\"\");\n\n    gallery.insertAdjacentHTML(\"beforeend\", galleryMarkup);\n    lightbox.refresh();\n  } catch (error) {\n    console.error(\"Error rendering images:\", error);\n    showError(\"There was an issue rendering the images.\");\n  }\n}\n\nexport async function clearGallery() {\n  try {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n    } catch (error) {\n      console.error(\"Error clearing gallery:\", error);\n    }\n}\n\nexport function showNoResultsMessage() {\n    iziToast.error({\n        title: 'Oops!',\n        message: \"Sorry, there are no images matching your search query. Please try again!\",\n        position: 'topRight',\n    });\n}\n\nexport function showError(message) {\n    iziToast.error({\n        title: 'Error!',\n        message: message,\n        position: 'topRight',\n    });\n}\n\nexport function showLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.remove(\"hidden\");\n    }\n}\n\nexport function hideLoader() {\n    const loader = document.querySelector(\".loader\");\n    if (loader) {\n        loader.classList.add(\"hidden\");\n    }\n}\n\nexport async function smoothScroll() {  \n    const firstCard = document.querySelector(\".gallery a img\");\n    if (firstCard) {\n      const cardHeight = firstCard.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2, \n            behavior: \"smooth\" \n        });\n    }\n}\n\n\n\n","import axios from 'axios';\nimport { hideLoader, showLoader } from './render-functions';\n\nexport async function fetchImages(query, page = 1) {\n    showLoader();\n    try {\n        const response = await axios.get(\"https://pixabay.com/api/\", {\n            params: {\n                key: \"48827585-ba4cf8d41bbd413a9ae07e3ba\",\n                q: query,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                page: page,\n                per_page: 40,\n            }\n        });\n\n     return {\n            hits: response.data.hits, \n            totalHits: response.data.totalHits \n        };\n    } catch (error) {\n        console.error(\"Error fetching images:\", error);\n        throw error;\n    } finally {\n        hideLoader();\n    }\n}\n\n\n\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, clearGallery, showNoResultsMessage, showError, showLoader, hideLoader, smoothScroll } from './js/render-functions.js';\n\nimport \"./css/loader.css\";\n\n\nconst searchForm = document.querySelector(\".search-form\");\nconst searchInputElement = document.querySelector(\".search-input\");\nconst loadMoreButton = document.querySelector(\".load-more\");\nconst endMessage = document.querySelector(\".end-message\");\n\nlet currentQuery = \"\";\nlet currentPage = 1;\nlet totalHits = 0;\n\nsearchForm.addEventListener(\"submit\", async event => {\n    event.preventDefault();\n\n    const searchInputValue = searchInputElement.value.trim();\n    if (searchInputValue === \"\") {\n        showError(\"Please enter a search query!\");\n        return;\n    }\n    if (searchInputValue !== currentQuery) {\n        currentQuery = searchInputValue;\n        currentPage = 1;\n        totalHits = 0;\n        clearGallery();\n        loadMoreButton.classList.add(\"hidden\");\n        endMessage.classList.add(\"hidden\"); \n    }\n\n    try {\n        const { hits, totalHits: total } = await fetchImages(currentQuery, 1);\n\n        totalHits = total;\n\n        if (!hits.length) {\n            showNoResultsMessage();\n            return;\n        }\n\n        await renderImages(hits);\n\n        if (hits.length < 40 || totalHits <= 40) {\n            endMessage.classList.remove(\"hidden\");\n        } else {\n            loadMoreButton.classList.remove(\"hidden\");\n        }\n    } catch (error) {\n        showError(\"An unexpected error occurred. Please try again later.\");\n    } finally {\n        searchInputElement.value = \"\";\n    }\n});\n\nloadMoreButton.addEventListener(\"click\", async () => {\n    try {\n        showLoader();\n        currentPage++;\n        const { hits } = await fetchImages(currentQuery, currentPage);\n        \n        if (hits.length === 0) {\n            loadMoreButton.classList.add(\"hidden\");\n            endMessage.classList.remove(\"hidden\");\n            return;\n        }\n        if (!hits.length) {\n            loadMoreButton.classList.add(\"hidden\");\n            endMessage.classList.remove(\"hidden\");\n            return;\n        }\n        await renderImages(hits);\n       if (hits.length < 40 || currentPage * 40 >= totalHits) {\n            loadMoreButton.classList.add(\"hidden\");\n            endMessage.classList.remove(\"hidden\");\n        }\n            \n            smoothScroll();\n        \n    } catch (error) {\n        showError(\"An unexpected error occurred. Please try again later.\");\n    } finally {\n        hideLoader();\n    }\n});\n"],"names":["lightbox","SimpleLightbox","renderImages","images","gallery","galleryMarkup","image","error","showError","clearGallery","showNoResultsMessage","iziToast","message","showLoader","loader","hideLoader","smoothScroll","firstCard","cardHeight","fetchImages","query","page","response","axios","searchForm","searchInputElement","loadMoreButton","endMessage","currentQuery","currentPage","totalHits","event","searchInputValue","hits","total"],"mappings":"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"}